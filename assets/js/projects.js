(function() {

  //Adding Listeners
  document.querySelectorAll("#prjDetails .close")[0].addEventListener('click',function(e){closeDetailProject();});
 
//English
  try{
    //Easy GD
    document.querySelectorAll(".easygd img")[0].addEventListener('click',function(e){
      detailProject({"id":"easygd","name":"Easy GD","img":"assets/img/easygd.png","url":"http://github.sheldonled.com/easygd/"});
    });
  } catch (e){} //do nothing
  try{
    //Hey VR!
    document.querySelectorAll(".heyvr img")[0].addEventListener('click',function(e){
      detailProject({"id":"heyvr","name":"Hey VR!","img":"assets/img/mozvr.png","url":"http://github.sheldonled.com/heyvr"});
    });
  } catch (e){} //do nothing
  try{
    //FootNotes
    document.querySelectorAll(".footnotes img")[0].addEventListener('click',function(e){
      detailProject({"id":"footnotes","name":"FootNotes","img":"assets/img/footnotes.png","url":"http://github.sheldonled.com/footnotes"});
    });
  } catch (e){} //do nothing
  try{
    //Coplacar
    document.querySelectorAll(".coplacar img")[0].addEventListener('click',function(e){
      detailProject({"id":"coplacar","name":"Coplacar","img":"assets/img/coplacar.png","url":"http://github.sheldonled.com/coplacar"});
    });
  } catch (e){} //do nothing
  try{
    //FGSL
    document.querySelectorAll(".fgsl img")[0].addEventListener('click',function(e){
      detailProject({"id":"fgsl","name":"FGSL","img":"assets/img/fgsl.png","url":"http://github.sheldonled.com/fgslwebapp"});
    });
  } catch (e){} //do nothing
  try{
    //Play Compras
    document.querySelectorAll(".playcompras img")[0].addEventListener('click',function(e){
      detailProject({"id":"playcompras","name":"Play Compras","img":"assets/img/playcompras.png","url":"http://github.sheldonled.com/playcompras"});
    });
  } catch (e){} //do nothing
  try{
    //Music Fun
    document.querySelectorAll(".musicfun img")[0].addEventListener('click',function(e){
      detailProject({"id":"musicfun","name":"Music Fun","img":"assets/img/musicfun.png","url":"http://github.sheldonled.com/musicfun"});
    });
  } catch (e){} //do nothing
  try{
    //Alfa Notas
    document.querySelectorAll(".alfanotas img")[0].addEventListener('click',function(e){
      detailProject({"id":"alfanotas","name":"Alfa Notas","img":"assets/img/alfanotas.png","url":"http://github.sheldonled.com/alfanotas"});
    });
  } catch (e){} //do nothing
  try{
    //RAP
    document.querySelectorAll(".rap img")[0].addEventListener('click',function(e){
      detailProject({"id":"rap","name":"RAP","img":"assets/img/rap.png","url":"http://github.com/sheldonled/rap"});
    });
  } catch (e){} //do nothing
  try{
    //Boleto Check
    document.querySelectorAll(".boletocheck img")[0].addEventListener('click',function(e){
      detailProject({"id":"boletocheck","name":"Boleto Check","img":"assets/img/boletocheck.png","url":"http://github.com/sheldonled/boletocheck"});
    });
  } catch (e){} //do nothing
  try{
    //SEMED
    document.querySelectorAll(".semed img")[0].addEventListener('click',function(e){
      detailProject({"id":"semed","name":"SEMED","img":"assets/img/semed.png","url":"http://projetos.sheldonled.com/semed"});
    });
  } catch (e){} //do nothing
  try{
    //DGI - Etica Online
    document.querySelectorAll(".eticaonline img")[0].addEventListener('click',function(e){
      detailProject({"id":"eticaonline","name":"DGI - Etica Online","img":"assets/img/eticaonline.png","url":"http://www.eticaonline.com.br/novo"});
    });
  } catch (e){} //do nothing
  try{
    //FLISOL 2016
    document.querySelectorAll(".flisol img")[0].addEventListener('click',function(e){
      detailProject({"id":"flisol","name":"FLISOL 2016","img":"assets/img/flisol.png","url":"http://gyn.flisol.fgsl.net/"});
    });
  } catch (e){} //do nothing
  try{
    //Loboratório Santa Inês
    document.querySelectorAll(".labsantaines img")[0].addEventListener('click',function(e){
      detailProject({"id":"labsantaines","name":"Laboratório Santa Inês","img":"assets/img/labsantaines.png","url":"http://www.labsantaines.com/novosite/"});
    });
  } catch (e){} //do nothing

//Portuguese
  try{
    //Easy GD
    document.querySelectorAll(".pt-easygd img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-easygd","name":"Easy GD","img":"../assets/img/easygd.png","url":"http://github.sheldonled.com/easygd"});
    });
  } catch (e){} //do nothing
  try{
    //FootNotes
    document.querySelectorAll(".pt-footnotes img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-footnotes","name":"FootNotes","img":"../assets/img/footnotes.png","url":"http://github.sheldonled.com/footnotes"});
    });
  } catch (e){} //do nothing
  try{
    //Hey VR!
    document.querySelectorAll(".pt-heyvr img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-heyvr","name":"Hey VR!","img":"../assets/img/mozvr.png","url":"http://github.sheldonled.com/heyvr"});
    });
  } catch (e){} //do nothing
  try{
    //Coplacar
    document.querySelectorAll(".pt-coplacar img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-coplacar","name":"Coplacar","img":"../assets/img/coplacar.png","url":"http://github.sheldonled.com/coplacar"});
    });
  } catch (e){} //do nothing
  try{
    //FGSL
    document.querySelectorAll(".pt-fgsl img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-fgsl","name":"FGSL","img":"../assets/img/fgsl.png","url":"http://github.sheldonled.com/fgslwebapp"});
    });
  } catch (e){} //do nothing
  try{
    //Play Compras
    document.querySelectorAll(".pt-playcompras img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-playcompras","name":"Play Compras","img":"../assets/img/playcompras.png","url":"http://github.sheldonled.com/playcompras"});
    });
  } catch (e){} //do nothing
  try{
    //Music Fun
    document.querySelectorAll(".pt-musicfun img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-musicfun","name":"Music Fun","img":"../assets/img/musicfun.png","url":"http://github.sheldonled.com/musicfun"});
    });
  } catch (e){} //do nothing
  try{
    //Alfa Notas
    document.querySelectorAll(".pt-alfanotas img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-alfanotas","name":"Alfa Notas","img":"../assets/img/alfanotas.png","url":"http://github.sheldonled.com/alfanotas"});
    });
  } catch (e){} //do nothing
  try{
    //RAP
    document.querySelectorAll(".pt-rap img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-rap","name":"RAP","img":"../assets/img/rap.png","url":"http://github.com/sheldonled/rap"});
    });
  } catch (e){} //do nothing
  try{
    //Boleto Check
    document.querySelectorAll(".pt-boletocheck img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-boletocheck","name":"Boleto Check","img":"../assets/img/boletocheck.png","url":"http://github.com/sheldonled/boletocheck"});
    });
  } catch (e){} //do nothing
  try{
    //SEMED
    document.querySelectorAll(".pt-semed img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-semed","name":"SEMED","img":"../assets/img/semed.png","url":"http://projetos.sheldonled.com/semed"});
    });
  } catch (e){} //do nothing
  try{
    //DGI - Etica Online
    document.querySelectorAll(".pt-eticaonline img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-eticaonline","name":"DGI - Etica Online","img":"../assets/img/eticaonline.png","url":"http://www.eticaonline.com.br/novo"});
    });
  } catch (e){} //do nothing
  try{
    //FLISOL 2016
    document.querySelectorAll(".pt-flisol img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-flisol","name":"FLISOL 2016","img":"../assets/img/flisol.png","url":"http://gyn.flisol.fgsl.net/"});
    });
  } catch (e){} //do nothing
  try{
    //Loboratório Santa Inês
    document.querySelectorAll(".pt-labsantaines img")[0].addEventListener('click',function(e){
      detailProject({"id":"pt-labsantaines","name":"Laboratório Santa Inês","img":"../assets/img/labsantaines.png","url":"http://www.labsantaines.com/novosite/"});
    });
  } catch (e){} //do nothing

  //Closing the detail view by ESC key
  document.onkeyup = function(e){
    if(e.keyCode == 27) {
      closeDetailProject();
    }
  };
  
  /**
   * Do the work of closing the detail view
   */
  function closeDetailProject(){
    el = document.getElementById("prjDetails");
    hiddenPos = (document.documentElement.scrollTop || document.body.scrollTop)+window.innerHeight;
    showDetail(el,hiddenPos,5,true);
    window.onscroll = "";
  }
  /**
   * Function that shows the detail view of a project
   */
  function detailProject(prj) {
    var view = document.getElementById("prjDetails"),
    prjName = document.getElementById("detail-prjName"),
    prjDesc = document.getElementById("detail-prjDesc"),
    prjUrl = document.getElementById("detail-prjUrl"),
    prjImg = document.getElementById("detail-prjImg");
    if(view.style.display == "block"){
      closeDetailProject();
      return;
    }
    //Adding content to the detail view
    prjName.textContent = prj.name;
    prjImg.src  = prj.img;
    prjImg.alt  = prj.name;
    prjUrl.href = prj.url;
    //Adding the description of each project
    switch(prj.id) {
      case "easygd":
        prjDesc.innerHTML = "<p>Easy GD is a project that uses Google Drive API "+
        "to manage files on your Google Drive Account. It's just a simple project, "+
        "doesn't have special features. The main goal of this project is to show "+
        "how simple is to work with Google Drive API.</p>";
        break;
      case "heyvr":
        prjDesc.innerHTML = "<p>It's a pool of examples using VR framworks. By the moment the only Framework "+
        "used is <a href='https://aframe.io' target='_blank'>A-Frame</a>.</p> "+
        "<p><a href='http://github.sheldonled.com/heyvr/myhelloworld.html' target='_blank'>See hello world example</a>.</p>";
        break;
      case "footnotes":
        prjDesc.innerHTML = "<p>A piece of JavaScript/JQuery code that shows notes about "+
        "something in your website. The best way to understand is to "+
        "<a href='http://github.sheldonled.com/footnotes' target='_blank'>Take a look</a>.</p>";
        break;
      case "coplacar":
        prjDesc.innerHTML = "<p>Coplacar is a webapp that shows the placar of the world cup games of 2014. "+
        "It all started with a piece of code of professor Fernando Masanori called "+
        "<a href='https://gist.github.com/fmasanori/1288160dad16cc473a53' target='_blank'>World Cup in six lines of Python 3</a>, "+
        "I saw the link that retrieves the results of the matches in a json file, so I decided to make an app with it.</p>";
        break;
      case "fgsl":
        prjDesc.innerHTML = "<p>A webapp that shows information about a local event in Goiânia - Goiás, called"+
        " <a href=http://fgsl.net' target='_blank'>FGSL (Fórum Goiano de Software Livre)</a>.</p> ";
        break;
      case "playcompras":
        prjDesc.innerHTML = "<p>A webapp that allows users to add items in a list and see the total "+
        "money they'll waste.</p>";
        break;
      case "musicfun":
        prjDesc.innerHTML = "<p>A webapp sample using oscilator from Web Audio API</p>";
        break;
      case "alfanotas":
        prjDesc.innerHTML = "<p>A webapp that allows students from "+
        "<a href='http://www.alfa.br' target='_blank'>Faculdade Alfa</a> calculate their grade.</p>";
        break;
      case "rap":
        prjDesc.innerHTML = "<p>It's a kind of boilerplate, or Proof "+
        "of Concept, of how to use REST with PHP and make an API to access using AngularJS</p>"+
        "<p>RAP extends for REST AngularJS and PHP</p>";
        break;
      case "boletocheck":
        prjDesc.innerHTML = "<p>It's a piece of PHP code that checks the sequence of numbers code "+
        "of a bank slip and output the values so that you can check if it's all right with the bank slip itself.</p>";
        break;
      case "eticaonline":
        prjDesc.innerHTML = "<p>My work on this project was to develop a system that gets information "+
        "from a bunch of web services, and retrieves financial information about a particular person. "+
        "I also developed the website, in which I used only pure PHP to perform the server side "+
        "and pure HTML, JS and CSS to perform the Front end.</p>"+
        "<div class='tech'><span>PHP</span><span>WordPress</span><span>MySQL</span><span>Interbase</span><span>HTML</span>"+
        "<span>JavaScript</span><span>CSS</span></div>";
        break;
      case "semed":
        prjDesc.innerHTML = "<p>My work on this project was to develop a WordPress Theme, "+
        "based on the desing created by the client ideas.</p>"+
        "<div class='tech'><span>PHP</span><span>WordPress</span><span>MySQL</span><span>HTML</span>"+
        "<span>JavaScript</span><span>JQuery</span><span>CSS</span></div>";
        break;
      case "flisol":
        prjDesc.innerHTML = "<p>My work on this project was to develop the visual of the website "+
        "using just CSS, based on the HTML structure provided by "+
        "<a href='https://github.com/cercomp/weby' target='_blank'>Weby's</a> blank theme. Also I "+
        "was responsible for all content management during the event.</p>"+
        "<div class='tech'><span>JavaScript</span><span>JQuery</span><span>CSS</span></div>";
        break;
      case "labsantaines":
        prjDesc.innerHTML = "<p>My work on this project was first, to develop a Joomla Template, "+
        "using the design developed by <a href='http://www.ederferreira.com.br/' target='_blank'>Eder Ferreira</a>. "+
        "After, I developed 2 Joomla Components (Curriculum subscribe and Costumers subscribe) and one module "+
        "(Disease Internacinal Code Searching).</p>"+
        "<div class='tech'><span>PHP</span><span>Joomla</span><span>MySQL</span><span>HTML</span>"+
        "<span>JavaScript</span><span>JQuery</span><span>CSS</span></div>";
        break;
//Portuguese

      case "pt-easygd":
        prjDesc.innerHTML = "<p>Easy GD é um projeto que usa a API do Google Drive "+
        "para gerenciar arquivos na sua conta do Google Drive. Isto é um projeto simples, "+
        "não tem características especiais. O principal objetivo deste projeto é mostrar "+
        "o quão simples é trabalhar com a API Google Drive.</p>";
        break;
      case "pt-heyvr":
        prjDesc.innerHTML = "<p>É apenas um repositório de exemplos usando biblitecas de Realidade Virtual. "+
        "No momento a única biblioeca utilizada é o <a href='https://aframe.io' target='_blank'>A-Frame</a>.</p> "+
        "<p><a href='http://github.sheldonled.com/heyvr/myhelloworld.html' target='_blank'>Veja meu 'hello world'</a>.</p>";
        break;
      case "pt-footnotes":
        prjDesc.innerHTML = "<p>Um pedaço de código JavaScript/JQuery que mostra notas sobre "+
        "alguma coisa no seu site. A melhor forma de entender este projeto é "+
        "<a href='http://github.sheldonled.com/footnotes' target='_blank'>Ver uma demonstração online</a>.</p>";
        break;
      case "pt-coplacar":
        prjDesc.innerHTML = "<p>Coplacar é uma WebApp que mostra o placar da Copa do Mundo de 2014. "+
        "Tudo começou com um pequeno pedaço de código que o professor Fernando Masanori postou como "+
        "<a href='https://gist.github.com/fmasanori/1288160dad16cc473a53' target='_blank'>Jogos da Copa do Mundo em seis linhas de Python 3</a>, "+
        "Eu vi que o link obtinha os resultados dos jogos em um arquivo JSON, então eu decidi fazer um App com isso.</p>";
        break;
      case "pt-fgsl":
        prjDesc.innerHTML = "<p>Uma WebApp que mostra informação sobre um evento local em Goiânia - Goiás, chamado"+
        " <a href=http://fgsl.net' target='_blank'>FGSL (Fórum Goiano de Software Livre)</a>.</p> ";
        break;
      case "pt-playcompras":
        prjDesc.innerHTML = "<p>Uma WebApp que permite usuários adicionarem itens em uma lista e verem o valor total "+
        "que eles irão gastar.</p>";
        break;
      case "pt-musicfun":
        prjDesc.innerHTML = "<p>Um exemplo de WebApp usando oscilador da API Web Audio</p>";
        break;
      case "pt-alfanotas":
        prjDesc.innerHTML = "<p>Uma WebApp que permite os estudantes da "+
        "<a href='http://www.alfa.br' target='_blank'>Faculdade Alfa</a> calcularem suas notas.</p>";
        break;
      case "pt-rap":
        prjDesc.innerHTML = "<p>É uma espécie de boilerplate, ou Prova de conceito "+
        "de como usar REST com PHP e fazer uma API para ser acessada utilizando AngularJS</p>"+
        "<p>RAP é uma sigla para REST AngularJS and PHP</p>";
        break;
      case "pt-boletocheck":
        prjDesc.innerHTML = "<p>É um pedaço de código em PHP que checa a linha digitável "+
        "de um boleto e mostra os valores possíveis de serem extraídos, para que você possa "+
        "checar a informação e verificar se a linha digitável está correta.</p>";
        break;
      case "pt-eticaonline":
        prjDesc.innerHTML = "<p>Meu trabalho neste projeto foi desenvolver um sistema que obtem informação "+
        "de vários web services, e retorna informações financeiras sobre uma pessoa ou empresa. "+
        "Eu também desenvolvi o site, no qual foi usado apenas PHP puro no servidor "+
        "e HTML, JS and CSS puro para o Front end. Ambas as partes sem nenhum framework ou biblioteca.</p>"+
        "<div class='tech'><span>PHP</span><span>MySQL</span><span>Interbase</span><span>HTML</span>"+
        "<span>JavaScript</span><span>CSS</span></div>";
        break;
      case "pt-semed":
        prjDesc.innerHTML = "<p>Meu trabalho neste projeto foi desenvoler um tema para WordPress, "+
        "baseado no design que eu criei de acordo com as ideias do cliente.</p>"+
        "<div class='tech'><span>PHP</span><span>WordPress</span><span>MySQL</span><span>HTML</span>"+
        "<span>JavaScript</span><span>JQuery</span><span>CSS</span></div>";
        break;
      case "pt-flisol":
        prjDesc.innerHTML = "<p>Meu trabalho neste projeto foi desenvolver a parte visual do site "+
        "usando apenas CSS, baseado na estrutura HTML provida pelo tema 'blank' do CMS "+
        "<a href='https://github.com/cercomp/weby' target='_blank'>Weby's</a>. Eu também fui "+
        "responsável por todo o gerenciamento de conteúdo durante o evento.</p>"+
        "<div class='tech'><span>JavaScript</span><span>JQuery</span><span>CSS</span></div>";
        break;
      case "pt-labsantaines":
        prjDesc.innerHTML = "<p>Meu trablho neste projeto foi, primeiramente desenvolver um Template Joomla, "+
        "usando o design desenvolvido por <a href='http://www.ederferreira.com.br/' target='_blank'>Eder Ferreira</a>. "+
        "Depois, eu desenvolvi 2 componentes Joomla (inscrição de Curriculo e inscrição de Clientes) e 1 módulo "+
        "(Busca de Código International de Doenças).</p>"+
        "<div class='tech'><span>PHP</span><span>Joomla</span><span>MySQL</span><span>HTML</span>"+
        "<span>JavaScript</span><span>JQuery</span><span>CSS</span></div>";
        break;
      default:
        prjDesc.innerHTML = "<p>=)</p>"; 
        break;
    }

    hiddenPos = (document.documentElement.scrollTop || document.body.scrollTop)+window.innerHeight;  
    view.style.display = "block";
    view.style.top = hiddenPos+"px";
    showDetail(view,(document.documentElement.scrollTop || document.body.scrollTop),5); 
    window.onscroll = function(){
      var detailTop     = parseInt(document.getElementById("prjDetails").style.top),
          windowTop     = (document.documentElement.scrollTop || document.body.scrollTop),
          detailHeight  = document.getElementById("prjDetails").offsetHeight,
          windowHeight  = window.innerHeight;

          if(detailTop >= windowTop) {
            document.getElementById("prjDetails").style.top = (document.documentElement.scrollTop || document.body.scrollTop)+"px";
          } else {
            diffBottom = Math.abs(detailTop - windowTop) - Math.abs(detailHeight - windowHeight);
            if(diffBottom > 0) {
              document.getElementById("prjDetails").style.top = (detailTop+diffBottom)+"px";
            }
          }
    };
  }


  function showDetail(el,y,interval,hide) {
    elTop = parseInt(el.style.top);
    if (elTop == y){
      if(hide)el.style.display="none";
      return;
    } else if(Math.abs(elTop-y) < 25) {
      el.style.top = y+"px";
      if(hide)el.style.display="none";
      return;
    }

    el.style.top = ((elTop > y) ? elTop-20 : ((elTop < y) ? elTop+20 : y))+"px";
    
    setTimeout(function() { showDetail(el, y, interval,hide); }, interval);
  }
}());